import{_ as s,o as a,c as n,V as l}from"./chunks/framework.f2b6412b.js";const d=JSON.parse('{"title":"SCP / Rsync Behavior","description":"","frontmatter":{},"headers":[],"relativePath":"ssh/readme_scp_rsync.md","filePath":"ssh/readme_scp_rsync.md"}'),o={name:"ssh/readme_scp_rsync.md"},p=l(`<h1 id="scp-rsync-behavior" tabindex="-1">SCP / Rsync Behavior <a class="header-anchor" href="#scp-rsync-behavior" aria-label="Permalink to &quot;SCP / Rsync Behavior&quot;">​</a></h1><h2 id="background" tabindex="-1">Background <a class="header-anchor" href="#background" aria-label="Permalink to &quot;Background&quot;">​</a></h2><ul><li>Had issues with duplicate folders when using the command more than once or not at all</li><li>Was aware of the source vs source/ but hard. Syntax doesn&#39;t feel intuitive</li><li>windows / posix paths. i.e. ~/home</li></ul><h2 id="goal" tabindex="-1">Goal <a class="header-anchor" href="#goal" aria-label="Permalink to &quot;Goal&quot;">​</a></h2><ul><li>ssh copy folder from source &#39;~/a/&#39; to destination &#39;~/tmp/a/&#39; <ul><li>[Expected Folder Structure](##Expected\\ Folder\\ Structure)</li></ul></li></ul><h2 id="summary-of-findings" tabindex="-1">Summary of Findings <a class="header-anchor" href="#summary-of-findings" aria-label="Permalink to &quot;Summary of Findings&quot;">​</a></h2><ol><li>Single quotes and use $HOME <ul><li>$HOME is pretty universel. case-senstive $HOME <ol><li>except in CMD. and psexec -s. <ul><li>so don&#39;t use $HOME better to use full path to user</li></ul></li><li>psexec. probably use &#39;$env:PUBLIC&#39; -&gt; <code>C:\\Users\\Public</code></li></ol></li><li>PWSH supports regular slashes &#39;/&#39; in paths</li></ul></li><li>Create /Ensure the destination folder exists on the destination</li><li>Windows PSEXec</li></ol><ul><li>linux to linux -&gt; rsync </li><li>linux to windows -&gt; scp <ul><li>assuming pwsh is defaulted shell of ssh</li></ul></li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">##!/bin/bash</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Examples for both Windows and Linux. and no duplicates if ran multiple times</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> $HOME</span><span style="color:#C3E88D;">/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remotehost:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">$HOME/tmp</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> $HOME</span><span style="color:#C3E88D;">/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">$HOME/tmp</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## If $HOME/tmp already exists</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Single quotes important!</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">##recommended... for windows psexec hardcode the path</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> $HOME</span><span style="color:#C3E88D;">/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">$Env:PUBLIC/tmp</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> $HOME</span><span style="color:#C3E88D;">/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%PUBLIC%/tmp</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">## unverified. might work if cmd is default ssh shell</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Example for Linux</span></span>
<span class="line"><span style="color:#FFCB6B;">rsync</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remotehost:~/tmp</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## ~/tmp will be created if it doesnt exist</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Single quotes important!</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">##--------------------------------------------------</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Create folders if not exist / exists - Single Quotes important!</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## avoid ssh to run the command.dont recommend using ssh if you dont have to. overhead to create connection to run a single command</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remotehost</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mkdir -p $HOME/tmp;tree $HOME/tmp</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--color=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">auto</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">New-Item -Path &quot;$HOME/tmp&quot; -ItemType Directory -Force -ErrorAction SilentlyContinue ; Get-ChildItem -Path &quot;$HOME/tmp&quot;</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Remove Folders Example</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remotehost</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rm -rf &quot;$HOME/tmp&quot;;tree &quot;$HOME/tmp&quot;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Remove-Item -Path &quot;$HOME/tmp&quot; -Recurse -Force -ErrorAction SilentlyContinue ; Get-ChildItem -Path &quot;$HOME/tmp&quot; -ErrorAction SilentlyContinue;write-host </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">deleted</span><span style="color:#89DDFF;">&#39;&#39;</span></span></code></pre></div><h2 id="rsync-windows-cygwin" tabindex="-1">Rsync Windows Cygwin <a class="header-anchor" href="#rsync-windows-cygwin" aria-label="Permalink to &quot;Rsync Windows Cygwin&quot;">​</a></h2><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-2G7qp" id="tab-tAXzgjR" checked="checked"><label for="tab-tAXzgjR">bash</label><input type="radio" name="group-2G7qp" id="tab-P28kpd4"><label for="tab-P28kpd4">bash</label></div><div class="blocks"><div class="language-bash active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># https://akliang.medium.com/how-to-rsync-directly-into-a-windows-10-machine-using-openssh-not-cygwin-or-wsl-cbbadff95712</span></span>
<span class="line"><span style="color:#FFCB6B;">rsync</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-avP</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--rsync-path=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wsl rsync</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">file_to_sen</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">usernam</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">@</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">host_i</span><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">:</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">pat</span><span style="color:#A6ACCD;">h</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># https://superuser.com/questions/1734844/cygwin-rsync-cannot-run-outside-of-cygwin-terminal</span></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Cygwin\\bin\\rsync.exe</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">C:\\Cygwin\\bin\\ssh.exe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">source_file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">destination.</span></span></code></pre></div></div></div><h2 id="test-environment" tabindex="-1">Test Environment <a class="header-anchor" href="#test-environment" aria-label="Permalink to &quot;Test Environment&quot;">​</a></h2><ul><li>localhost is a linux host / source</li><li>remotehost is a linux ssh destination host (same machine as localhost)</li><li>win11 is a windows ssh destination host <ul><li>pwsh is the default shell</li></ul></li><li>ssh config is configured properly</li></ul><h4 id="expected-folder-structure" tabindex="-1">Expected Folder Structure <a class="header-anchor" href="#expected-folder-structure" aria-label="Permalink to &quot;Expected Folder Structure&quot;">​</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">## Source Folder</span></span>
<span class="line"><span style="color:#FFCB6B;">/root/a</span></span>
<span class="line"><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a2</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a3</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a4.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">directories,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Expected Destination Folder after copy</span></span>
<span class="line"><span style="color:#FFCB6B;">/root/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a1</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a2</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a3</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a4.txt</span></span>
<span class="line"><span style="color:#FFCB6B;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">directories,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span></span></code></pre></div><h6 id="errors" tabindex="-1">Errors <a class="header-anchor" href="#errors" aria-label="Permalink to &quot;Errors&quot;">​</a></h6><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">##--------------------------------------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">DExists:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/tmp:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">localhost:~/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">OK:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">localhost:~/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">OK:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">localhost:~/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">DNE</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/tmp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">localhost:~/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">ERROR:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">localhost:~/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">/root/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a2</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a3</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a4.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">directories,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span></span>
<span class="line"><span style="color:#FFCB6B;">ERROR:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">localhost:~/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">/root/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a1</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a2</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;">         </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a3</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;">             </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a4.txt</span></span>
<span class="line"><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a2</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a3</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a4.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">7</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">directories,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">files</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">##--------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Windows if tmp didnt exist and ran mulitple times</span></span>
<span class="line"><span style="color:#FFCB6B;">FullName</span><span style="color:#A6ACCD;">                              </span></span>
<span class="line"><span style="color:#FFCB6B;">--------</span><span style="color:#A6ACCD;">                                    </span></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Users\\Administrator\\tmp\\a</span><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Users\\Administrator\\tmp\\a1</span><span style="color:#A6ACCD;">               </span></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Users\\Administrator\\tmp\\a\\a1</span><span style="color:#A6ACCD;">             </span></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Users\\Administrator\\tmp\\a\\a1\\a2</span><span style="color:#A6ACCD;">          </span></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Users\\Administrator\\tmp\\a\\a1\\a2\\a3</span><span style="color:#A6ACCD;">       </span></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Users\\Administrator\\tmp\\a\\a1\\a2\\a3\\a4.txt</span></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Users\\Administrator\\tmp\\a1\\a2</span><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Users\\Administrator\\tmp\\a1\\a2\\a3</span><span style="color:#A6ACCD;">         </span></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Users\\Administrator\\tmp\\a1\\a2\\a3\\a4.txt</span></span></code></pre></div><h4 id="sample-execution-for-windows" tabindex="-1">Sample Execution for Windows <a class="header-anchor" href="#sample-execution-for-windows" aria-label="Permalink to &quot;Sample Execution for Windows&quot;">​</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">## Delete</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## create</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## scp</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## check</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Remove-Item -Path &quot;$HOME/tmp&quot; -Recurse -Force -ErrorAction SilentlyContinue ; Get-ChildItem -Path &quot;$HOME/tmp&quot; -ErrorAction SilentlyContinue;write-host </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">deleted</span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">New-Item -Path &quot;$HOME/tmp&quot; -ItemType Directory -Force -ErrorAction SilentlyContinue ; Get-ChildItem -Path &quot;$HOME/tmp&quot;</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> $HOME</span><span style="color:#C3E88D;">/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">$HOME/tmp</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> $HOME</span><span style="color:#C3E88D;">/a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">$HOME/tmp</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">## and again</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Get-ChildItem -Path &quot;$HOME/tmp&quot; -Recurse -ErrorAction Stop | Select-Object -Property FullName -First 10</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">FullName</span></span>
<span class="line"><span style="color:#A6ACCD;">--------</span></span>
<span class="line"><span style="color:#A6ACCD;">C:\\Users\\Administrator\\tmp\\a</span></span>
<span class="line"><span style="color:#A6ACCD;">C:\\Users\\Administrator\\tmp\\a\\a1</span></span>
<span class="line"><span style="color:#A6ACCD;">C:\\Users\\Administrator\\tmp\\a\\a1\\a2</span></span>
<span class="line"><span style="color:#A6ACCD;">C:\\Users\\Administrator\\tmp\\a\\a1\\a2\\a3</span></span>
<span class="line"><span style="color:#A6ACCD;">C:\\Users\\Administrator\\tmp\\a\\a1\\a2\\a3\\a4.txt</span></span></code></pre></div><h2 id="appendix" tabindex="-1">Appendix <a class="header-anchor" href="#appendix" aria-label="Permalink to &quot;Appendix&quot;">​</a></h2><h4 id="common-pitfalls" tabindex="-1">Common Pitfalls <a class="header-anchor" href="#common-pitfalls" aria-label="Permalink to &quot;Common Pitfalls&quot;">​</a></h4><ul><li>From man pages:</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">A trailing slash on a source path means &quot;copy the contents of this directory&quot;. Without a trailing slash it means &quot;copy the directory&quot;. DESTINATION Destination is the directory that source is copied to. If the source argument ends with a trailing slash, the contents of the source directory are copied into the destination directory. Otherwise, the source directory itself is copied into the destination directory. This behavior can be changed using the --recursive (-r) option.</span></span></code></pre></div><h4 id="full-log-more-details-in" tabindex="-1">Full log - More details in <a class="header-anchor" href="#full-log-more-details-in" aria-label="Permalink to &quot;Full log - More details in&quot;">​</a></h4><ul><li><a href="src%5Cscp_rsync%5Clogfile.log">logfile.log</a></li><li>look at generate_scp_rsync_log.sh for more details</li></ul><h2 id="dependencies" tabindex="-1">Dependencies <a class="header-anchor" href="#dependencies" aria-label="Permalink to &quot;Dependencies&quot;">​</a></h2><ul><li><a href="src%5Cdebug_utils%5Cps1%5CGet-Tree.ps1">Get-Tree.ps1</a><ul><li>in profiles</li></ul></li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">##!/bin/bash</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tree</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rsync</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Tested on Debian 11</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## rsync -V ## 3.2.3</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## sudo apt install tree rsync scp batcat -y</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## assuming ssh is installed</span></span></code></pre></div><h4 id="utility-commands" tabindex="-1">Utility Commands <a class="header-anchor" href="#utility-commands" aria-label="Permalink to &quot;Utility Commands&quot;">​</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#### Raw commands</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remotehost</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rm -rf &quot;$HOME/tmp&quot;</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Remove-Item -Path &quot;$HOME/tmp&quot; -Recurse -Force -ErrorAction SilentlyContinue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## todo</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## find -e </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">##Get-tree has some cmd to check for path</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## verify multiple mkdir -p for windows</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win11</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">New-Item -Path &quot;$HOME/tmp/a&quot; -ItemType Directory -Force -ErrorAction SilentlyContinue ; Get-Tree &quot;$HOME/tmp&quot;</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><h2 id="folder-name-change" tabindex="-1">Folder Name Change <a class="header-anchor" href="#folder-name-change" aria-label="Permalink to &quot;Folder Name Change&quot;">​</a></h2><ul><li>as of OpenSSH 9.0. scp uses sftp under the cover</li><li>Paramiko client as mentioned, is bundled with a sftp client</li><li><a href="https://www.linuxadictos.com/en/openssh-9-0-llega-con-sftp-en-lugar-de-scp-mejoras-y-mas.html##:~:text=9%20on%20Linux%3F-,Main%20new%20features%20of%20OpenSSH%209.0,host%2C%20which%20creates%20security%20issues" target="_blank" rel="noreferrer">https://www.linuxadictos.com/en/openssh-9-0-llega-con-sftp-en-lugar-de-scp-mejoras-y-mas.html##:~:text=9 on Linux%3F-,Main new features of OpenSSH 9.0,host%2C which creates security issues</a>. <ul><li>scp &#39;deprecated&#39; in favor of sftp</li></ul></li><li>apparently curl can use sftp... interesting</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">## Renames rasa_deps to rasa / folder name was changed</span></span>
<span class="line"><span style="color:#FFCB6B;">rsync</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/home/rasa/rasa_deps/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">{{@_host.loginprefix}}:/root/rasa</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">## this works in rsync, note because the </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## It&#39;s impossible in SCP to do it in one simple command - according to google</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#### i think i agree</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Next Best thing for us</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/rasa/rasa_deps/dependencies</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">{{@_host.loginprefix}}:/root/rasa</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">## this one works from trial an error</span></span></code></pre></div><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">tmp</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">|</span></span>
<span class="line"><span style="color:#C3E88D;">    print(&#39;hi&#39;)</span></span>
<span class="line"><span style="color:#C3E88D;">    def tmp:</span></span>
<span class="line"><span style="color:#C3E88D;">      print(&#39;bla&#39;)</span></span></code></pre></div>`,35),e=[p];function t(c,r,i,C,y,D){return a(),n("div",null,e)}const h=s(o,[["render",t]]);export{d as __pageData,h as default};
